<div class="row justify-content-center">
  <div class="col-md-6">
    <div class="card mb-4 mx-4">
      <form class="card-body p-4" [formGroup]="form" (ngSubmit)="onSubmit()">
        <h1>Register</h1>
        <p class="text-medium-emphasis">Create your account</p>
        <div class="mb-3">
          <div class="input-group">
            <span class="input-group-text"><bi name="at" /></span>
            <input
              formControlName="email"
              id="email"
              class="form-control"
              [ngClass]="{
                invalid: form.get('email').invalid && form.get('email').touched
              }"
              type="email"
              placeholder="Email"
            />
          </div>
          <div
            class="small text-end text-danger"
            *ngIf="form.get('email').invalid && form.get('email').touched"
          >
            <div *ngIf="form.get('email').errors['required']">
              Fill in this field
            </div>
            <div *ngIf="form.get('email').errors['email']">
              Enter a correct email
            </div>
          </div>
        </div>
        <div class="mb-3">
          <div class="input-group">
            <span class="input-group-text"><bi name="lock" /></span>
            <input
              formControlName="password"
              id="password"
              class="form-control"
              type="password"
              placeholder="Password"
              [ngClass]="{
                invalid:
                  form.get('password').invalid && form.get('password').touched
              }"
            />
          </div>
          <div
            class="small text-end text-danger"
            *ngIf="form.get('password').invalid && form.get('password').touched"
          >
            <div *ngIf="form.get('password').errors['required']">
              Fill in this field
            </div>
            <div
              *ngIf="
                form.get('password').errors['minlength'] &&
                form.get('password').errors['minlength']['requiredLength']
              "
            >
              Password must be at least
              {{ form.get("password").errors["minlength"]["requiredLength"] }}
              characters long
            </div>
          </div>
        </div>
        <div class="mb-4">
          <div class="input-group">
            <span class="input-group-text"><bi name="lock" /></span>
            <input
              formControlName="confirmPassword"
              id="confirmPassword"
              class="form-control"
              type="password"
              placeholder="Confirm password"
              [ngClass]="{
                invalid:
                  form.get('confirmPassword').invalid &&
                  form.get('confirmPassword').touched
              }"
            />
          </div>
          <div
            class="small text-end text-danger"
            *ngIf="
              form.get('confirmPassword').invalid &&
              form.get('confirmPassword').touched
            "
          >
            <div>
              <div *ngIf="form.get('confirmPassword').errors['required']">
                Fill in this field
              </div>
              <div *ngIf="form.errors?.['passwordMatchError']">
                Passwords must match
              </div>
            </div>
          </div>
        </div>
        <div>
          <p class="text-end small">
            Have an account?&nbsp;<a tabindex="-1" routerLink="/login">Login</a>
          </p>
        </div>
        <button
          class="btn btn-block btn-success"
          type="submit"
          [disabled]="form.invalid || form.disabled"
        >
          Create Account
        </button>
      </form>
    </div>
  </div>
</div>
